<!-- <div class="px-4 pt-4 mb-1">
  <dfs-select-slate></dfs-select-slate>
</div> -->

<mat-stepper [linear]="true" #stepper>
  <mat-step [stepControl]="qbSelectionFormGroup">
    <form [formGroup]="qbSelectionFormGroup">
      <ng-template matStepLabel>Select 4-5 QBs</ng-template>

      <mat-selection-list
        #qbs
        class="max-h-[385px] overflow-scroll rounded"
        formControlName="qbPoolCtrl"
      >
        @for (qb of availableQuarterbacks(); track qb.id) {
        <mat-list-option [selected]="qb.isSelectedForPlayerPool" [value]="qb">
          <span class="qb-text-color mr-3">QB</span>
          <span class="font-bold">{{ qb.name }}</span>
          <span class="ml-2 text-slate-300 text-sm">
            {{ qb.salary | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
          &bull;
          <span class="text-slate-300 text-sm">{{ qb.gameInfo }}</span>
        </mat-list-option>
        }
      </mat-selection-list>

      <dfs-sort-player-pool
        class="block mt-4"
        [quarterbacks]="qbSelectionFormGroup.controls.qbPoolCtrl.value || []"
        (updateQuarterbacks)="updateQuarterbacks($event)"
      ></dfs-sort-player-pool>

      <div class="mt-1">
        <button (click)="saveQbSelections()" matButton matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="rbSelectionFormGroup" label="Select 7-9 RBs">
    <form [formGroup]="rbSelectionFormGroup">
      <mat-selection-list
        #rbs
        class="max-h-[385px] overflow-scroll rounded"
        formControlName="rbPoolCtrl"
      >
        @for (rb of availableRunningBacks(); track rb.id) {
        <mat-list-option [selected]="rb.isSelectedForPlayerPool" [value]="rb">
          <span class="rb-text-color mr-3">RB</span>
          <span class="font-bold">{{ rb.name }}</span>
          <span class="ml-2 text-slate-300 text-sm">
            {{ rb.salary | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
          &bull;
          <span class="text-slate-300 text-sm">{{ rb.gameInfo }}</span>
        </mat-list-option>
        }
      </mat-selection-list>

      <dfs-sort-player-pool
        class="block mt-4"
        [runningBacks]="rbSelectionFormGroup.controls.rbPoolCtrl.value || []"
        (updateRunningBacks)="updateRunningBacks($event)"
      ></dfs-sort-player-pool>
      <div class="mt-1">
        <button matButton matStepperPrevious>Back</button>
        <button (click)="saveRBSelections()" matButton matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="wrSelectionFormGroup" label="Select 30-40 WRs">
    <form [formGroup]="wrSelectionFormGroup">
      <mat-selection-list
        #wrs
        class="max-h-[385px] overflow-scroll rounded"
        formControlName="wrPoolCtrl"
      >
        @for (wr of availableWideReceivers(); track wr.id) {
        <mat-list-option [selected]="wr.isSelectedForPlayerPool" [value]="wr">
          <span class="wr-text-color mr-3">WR</span>
          <span class="font-bold">{{ wr.name }}</span>
          <span class="ml-2 text-slate-300 text-sm">
            {{ wr.salary | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
          &bull;
          <span class="text-slate-300 text-sm">{{ wr.gameInfo }}</span>
        </mat-list-option>
        }
      </mat-selection-list>

      <dfs-sort-pass-catcher-pool
        class="block mt-4"
        [passCatchers]="wrSelectionFormGroup.controls.wrPoolCtrl.value || []"
        [position]="position.WR"
        (updatePassCatchers)="updateWideReceivers($event)"
      ></dfs-sort-pass-catcher-pool>

      <div class="mt-1">
        <button matButton matStepperPrevious>Back</button>
        <button (click)="saveWRSelections()" matButton matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="teSelectionFormGroup" label="Select 4-10 TEs">
    <form [formGroup]="teSelectionFormGroup">
      <mat-selection-list
        #tes
        class="max-h-[385px] overflow-scroll rounded"
        formControlName="tePoolCtrl"
      >
        @for (te of availableTightEnds(); track te.id) {
        <mat-list-option [selected]="te.isSelectedForPlayerPool" [value]="te">
          <span class="te-text-color mr-3">TE</span>
          <span class="font-bold">{{ te.name }}</span>
          <span class="ml-2 text-slate-300 text-sm">
            {{ te.salary | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
          &bull;
          <span class="text-slate-300 text-sm">{{ te.gameInfo }}</span>
        </mat-list-option>
        }
      </mat-selection-list>

      <dfs-sort-pass-catcher-pool
        class="block mt-4"
        [passCatchers]="teSelectionFormGroup.controls.tePoolCtrl.value || []"
        [position]="position.TE"
        (updatePassCatchers)="updateTightEnds($event)"
      ></dfs-sort-pass-catcher-pool>

      <div class="mt-1">
        <button matButton matStepperPrevious>Back</button>
        <button (click)="saveTightEndSelections()" matButton matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="dstSelectionFormGroup" label="Select 5-10 DSTs">
    <form [formGroup]="dstSelectionFormGroup">
      <mat-selection-list
        #dsts
        class="max-h-[385px] overflow-scroll rounded"
        formControlName="dstPoolCtrl"
      >
        @for (dst of availableDsts(); track dst.id) {
        <mat-list-option [selected]="dst.isSelectedForPlayerPool" [value]="dst">
          <span class="dst-text-color mr-3">DST</span>
          <span class="font-bold">{{ dst.name }}</span>
          <span class="ml-2 text-slate-300 text-sm">
            {{ dst.salary | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
          &bull;
          <span class="text-slate-300 text-sm">{{ dst.gameInfo }}</span>
        </mat-list-option>
        }
      </mat-selection-list>

      <dfs-sort-player-pool
        class="block mt-4"
        [dsts]="dstSelectionFormGroup.controls.dstPoolCtrl.value || []"
        (updateDsts)="updateDsts($event)"
      ></dfs-sort-player-pool>

      <div class="mt-1">
        <button matButton matStepperPrevious>Back</button>
        <button (click)="saveDSTSelections()" matButton matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>

    <div>
      <button matButton matStepperPrevious>Back</button>
      <button matButton (click)="generateLineupBuilders()">
        Generate Lineup Builders
      </button>
    </div>
  </mat-step>
</mat-stepper>
